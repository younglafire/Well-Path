{% extends 'goals/base.html' %}
{% load static %}

{% block content %}
<div class="container">
    <!-- Page Header -->
    <div class="page-header">
        <div class="d-flex align-items-center justify-content-center mb-3">
            <div class="bg-primary-100 rounded-circle p-3 me-3">
                <i data-lucide="folder" style="width: 32px; height: 32px; color: var(--primary-600);"></i>
            </div>
            <div>
                <h1 class="page-title mb-0">{{ category.cat }}</h1>
                <p class="page-subtitle mb-0">{{ goals|length }} active goal{{ goals|length|pluralize }} in this category</p>
            </div>
        </div>
    </div>

    <!-- Category Navigation -->
    <div class="modern-card mb-4">
        <div class="modern-card-body">
            <div class="d-flex flex-wrap gap-2 justify-content-center">
                <a href="{% url 'feed' %}" class="btn btn-secondary-modern btn-sm">
                    <i data-lucide="users" class="me-1"></i>All Categories
                </a>
                {% for cat in categories %}
                <a href="{% url 'category' cat.slug %}" 
                   class="btn {% if cat.id == category.id %}btn-primary-modern{% else %}btn-secondary-modern{% endif %} btn-sm">
                    <i data-lucide="folder" class="me-1"></i>{{ cat.cat }}
                    <span class="badge bg-light text-dark ms-1">{{ cat.active_goals_count }}</span>
                </a>
                {% endfor %}
            </div>
        </div>
    </div>

    {% if goals %}
    <!-- Feed Container -->
    <div class="social-feed">
        <div class="row justify-content-center">
            <div class="col-lg-8 col-xl-6">
                {% include 'goals/_feed_card.html' with goals=goals %}
            </div>
        </div>
    </div>
    {% else %}
    <!-- Empty State -->
    <div class="modern-card text-center">
        <div class="modern-card-body py-5">
            <i data-lucide="folder-x" style="width: 64px; height: 64px; color: var(--neutral-400);" class="mb-4"></i>
            <h4 class="text-muted">No goals in {{ category.cat }} yet</h4>
            <p class="text-muted mb-4">Be the first to create a goal in this category!</p>
            {% if user.is_authenticated %}
            <a href="{% url 'create_goal' %}" class="btn btn-primary-modern">
                <i data-lucide="plus" class="me-2"></i>Create Goal in {{ category.cat }}
            </a>
            {% else %}
            <a href="{% url 'register' %}" class="btn btn-primary-modern">
                <i data-lucide="user-plus" class="me-2"></i>Join WellPath
            </a>
            {% endif %}
        </div>
    </div>
    {% endif %}
</div>
{% endblock %}

{% block extra_scripts %}
<script src="{% static 'goals/js/social-feed.js' %}"></script>
{% endblock %}
        <h1 class="page-title">
            <i data-lucide="users" class="me-3"></i>
            Category
        </h1>
        <p class="page-subtitle">Join bla bla bla bla </p>
    </div>

    <!-- Feed Container -->
    <div class="social-feed">
        <div class="row justify-content-center">
            <div class="col-lg-8 col-xl-6">
                {% include 'goals/_feed_card.html' with goals=goals %}            </div>
        </div>
    </div>
</div>